<script>
  import { onMount } from "svelte";

  /**
   * Specify the orientation  for the field group
   * @type {"horizontal" | "vertical"}  [orientation = "horizontal"]
   */
  export let orientation = "horizontal";

  /**
   * Specify the label below  for the  field group
   * @type { boolean }  [labelBelow = false]
   */
  export let labelBelow = false;

  let fieldGroupEl;

  onMount(() => {
    if (labelBelow && fieldGroupEl && fieldGroupEl.childElementCount && fieldGroupEl.childNodes) {
      addChildClassName(fieldGroupEl.childNodes);
    }
  });

  function addChildClassName(el) {
    if (!el) {
      return false;
    }
    for (let index = 0; index < el.length; index++) {
      if (testHasClassName(el[index].classList, `spectrum-Radio`)) {
        el[index].classList += " spectrum-Radio--labelBelow";
      }
      if (testHasClassName(el[index].classList, `spectrum-Checkbox`)) {
        el[index].classList += " spectrum-Checkbox--labelBelow";
      }
    }
  }

  function testHasClassName(el, verifyString) {
    if (!el) {
      return false;
    }
    for (let index = 0; index < el.length; index++) {
      return el[index] === verifyString;
    }
  }
</script>

<div
  class="spectrum-FieldGroup"
  class:spectrum-FieldGroup--vertical={orientation === 'vertical'}
  bind:this={fieldGroupEl}>
  <slot />
</div>
