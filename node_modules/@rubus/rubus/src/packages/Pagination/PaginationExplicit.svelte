<script>
  import TextField from "../TextField";

  /**
   * Set the current  pagination number
   * @type {number}[currentPageNumber = 1]
   */
  export let currentPageNumber = 1;

  /**
   * Set the total number of pagination
   * @type {number}[totalPageNumber = 3]
   */
  export let totalPageNumber = 3;

  $: if (currentPageNumber === 0) {
    currentPageNumber = 1;
  }
  $: if (currentPageNumber > totalPageNumber) {
    currentPageNumber = totalPageNumber;
  }

  function testValue() {
    currentPageNumber = Math.abs(parseInt(+currentPageNumber));
  }
</script>

<style global>
  .spectrum-Pagination-textfield {
    width: var(--spectrum-pagination-textfield-width, var(--spectrum-global-dimension-size-600)) !important;
    min-width: var(--spectrum-pagination-textfield-width, var(--spectrum-global-dimension-size-600)) !important;
  }
</style>

<nav class="spectrum-Pagination spectrum-Pagination--explicit">
  <slot name="pagination-prev" />
  <TextField
    resetType="number"
    class="spectrum-Pagination-textfield"
    name="field"
    bind:value={currentPageNumber}
    pattern="[1-9]\d+"
    min="1"
    on:change={testValue} />
  <span class="spectrum-Body--secondary spectrum-Pagination-counter"><slot>of {totalPageNumber} pages</slot></span>
  <slot name="pagination-next" />
</nav>
