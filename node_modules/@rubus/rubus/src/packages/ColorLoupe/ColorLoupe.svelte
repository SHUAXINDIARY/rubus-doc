<script>
  import Color from "../utils/color/color.js";
  /**
   * Set its color loupe  open status
   * @type {boolean}[isOpen = false]
   */
  export let isOpen = false;

  /**
   * Set its color loupe  background color
   * @type {string}[orientation = "horizontal"]
   */
  export let color = "#000";

  /**
   * Set its color loupe pop-up orientation
   * @type {"horizontal" | "vertical" }[orientation = "horizontal"]
   */
  export let orientation = "horizontal";

  /**
   * Preconditions: variants => "alpha"
   * Get current opacity
   * @type {number}  [alpha = 1ã€‘
   */
  export let alpha = 1;

  $: thisBackgroundColor = Color(color).rgb().object();
</script>

<style global>
  .spectrum-ColorLoupe {
    bottom: calc(20% + var(--spectrum-global-dimension-static-size-200, 16px));
  }
  .spectrum-ColorLoupe--vertical {
    left: -15px;
    right: 0;
    bottom: calc(var(--spectrum-global-dimension-static-size-200) / 4);
    transform: rotate(90deg);
  }
  .spectrum-ColorLoupe--vertical.is-open {
    left: -10px;
    right: -20px;
    bottom: calc(var(--spectrum-global-dimension-static-size-200) / 4);
    transform: rotate(90deg);
  }
</style>

<svg
  class="spectrum-ColorLoupe"
  class:spectrum-ColorLoupe--vertical={orientation === 'vertical'}
  class:is-open={isOpen}>
  <g transform="translate(1 1)">
    <path
      class="spectrum-ColorLoupe-inner"
      d="M24,0A24,24,0,0,1,48,24c0,16.255-24,40-24,40S0,40.255,0,24A24,24,0,0,1,24,0Z"
      fill="rgba({thisBackgroundColor.r},{thisBackgroundColor.g},{thisBackgroundColor.b},{alpha})" />
    <path
      class="spectrum-ColorLoupe-outer"
      d="M24,2A21.98,21.98,0,0,0,2,24c0,6.2,4,14.794,11.568,24.853A144.233,144.233,0,0,0,24,61.132,144.085,144.085,0,0,0,34.4,48.893C41.99,38.816,46,30.209,46,24A21.98,21.98,0,0,0,24,2m0-2A24,24,0,0,1,48,24c0,16.255-24,40-24,40S0,40.255,0,24A24,24,0,0,1,24,0Z" />
  </g>
</svg>
