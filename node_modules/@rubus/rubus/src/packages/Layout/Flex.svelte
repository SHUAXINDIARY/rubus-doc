<script>
  import { afterUpdate } from "svelte";
  import { integrateProps, integrateAutoProps, integrateDimensionProps } from "../utils/integrate-style-props.js";

  /**
   * The element's unique identifier.
   * @type { string } [id=""]
   */
  export let id = "";

  /**
   * The display CSS property sets whether an element is treated as a block or inline element and the layout used for its children
   * @type { FlexDisplay } [display="flex"]
   * **/
  export let display = "flex";
  /**
   * The direction in which to layout children.
   * @type { FlexDirection } [direction="row"]
   */
  export let direction = "row";

  /**
   * Whether to wrap items onto multiple lines.
   * @type { FlexWrap } [wrap = ""]
   */
  export let wrap = "";

  /**
   * The distribution of space around items along the main axis.
   * @type { FlexJustifyContent } [justifyContent = "start"]
   */
  export let justifyContent = "";

  /**
   * The distribution of space around child items along the cross axis
   * @type { FlexAlignContent } [alignContent = ""]
   */
  export let alignContent = "";

  /**
   * The alignment of children within their container.
   * @type { FlexAlignItems } [alignItems = ""]
   */
  export let alignItems = "";

  /**
   * Whether to wrap items onto multiple lines.
   * @type { DimensionValue } [gap = ""]
   */
  export let gap = "";

  /**
   * The space to display between columns.
   * @type { DimensionValue } [columnGap = ""]
   */
  export let columnGap = "";

  /**
   * The space to display between row.
   * @type { DimensionValue } [rowGap = ""]
   */
  export let rowGap = "";

  /**
   * Overrides the layout related style.
   * @type { ILayout } [layout = {}]
   */
  export let layout = {};

  /**
   * Overrides the spacing related style.
   * @type { ISpacing } [spacing = {}]
   */
  export let spacing = {};

  /**
   * Overrides the sizing related style.
   * @type { ISize } [sizing = {}]
   */
  export let sizing = {};

  /**
   * Overrides the positioning related style.
   * @type { IPosition } [positioning = {}]
   */
  export let positioning = {};

  let layoutCssText = "";
  let spacingCssText = "";
  let sizingCssText = "";
  let positioningCssText = "";
  afterUpdate(() => {
    layoutCssText = integrateProps(layout);
    spacingCssText = integrateDimensionProps(spacing);
    sizingCssText = integrateAutoProps(sizing);
    positioningCssText = integrateAutoProps(positioning);
  });

  $: componentStyle = [
    `display:${display};`,
    direction && `flex-direction:${direction};`,
    wrap && `flex-wrap:${wrap};`,
    justifyContent && `justify-content:${justifyContent};`,
    alignContent && `align-content:${alignContent}`,
    alignItems && `align-items:${alignItems}`,
    gap && `gap:var(--spectrum-global-dimension-${gap}, var(--spectrum-alias-${gap}));"`,
    columnGap && `column-gap:var(--spectrum-global-dimension-${columnGap}, var(--spectrum-alias-${columnGap}));"`,
    rowGap && `row-gap:var(--spectrum-global-dimension-${rowGap}, var(--spectrum-alias-${rowGap}));"`,
  ]
    .filter(Boolean)
    .join("");
</script>

<div
  {id}
  style={layoutCssText + spacingCssText + sizingCssText + positioningCssText + componentStyle}
  class={$$restProps.class}>
  <slot />
</div>
