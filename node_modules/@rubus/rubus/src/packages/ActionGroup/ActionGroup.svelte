<script>
  import { afterUpdate } from "svelte";

  /**
   * Specify the orientation
   * @type {"horizontal" | "vertical"}[orientation="horizontal"]
   */
  export let orientation = "horizontal";

  /**
   * Specify the variants of action group
   * @type {"general" | "justified"}[variants = "justified"]
   */
  export let variants = "general";

  /**
   * When variants==="justified", set its dimensionã€‚
   * @type {Dimension}[dimension = ""]
   */
  export let dimension = "";

  /**
   * Is it a only icon of action group
   * @type {boolean}[onlyIcon=false]
   */
  export let onlyIcon = false;

  /**
   * Whether the action group is in quiet state
   * @type {boolean}[isQuiet=false]
   */
  export let isQuiet = false;

  /**
   * Whether the action group is in compact state
   * @type {boolean}[isCompact=false]
   */
  export let isCompact = false;

  /**
   * Specify the emphasized status of button group
   * @type { boolean } [emphasized= false]
   */
  export let emphasized = false;

  /**
   * Disable all action buttons
   * @type {boolean}[disabled=false]
   */
  export let disabled = false;

  let actionGroup;
  function addChildClassName() {
    let buttonClassName = [
      " spectrum-ActionGroup-item",
      isQuiet && "spectrum-ActionButton--quiet",
      emphasized && "spectrum-ActionButton--emphasized",
    ]
      .filter(Boolean)
      .join(" ");
    if (actionGroup) {
      const buttonItem = actionGroup.getElementsByClassName("spectrum-ActionButton");
      if (buttonItem.length !== 0) {
        for (let index = 0; index < buttonItem.length; index++) {
          if (disabled) {
            buttonItem[index].setAttribute("disabled", disabled);
          }
          buttonItem[index].className = buttonItem[index].className + buttonClassName;
        }
      }
      if (onlyIcon && variants === "general") {
        const buttonWrapItem = actionGroup.getElementsByClassName("spectrum-Button-wrap");
        if (buttonWrapItem.length !== 0) {
          for (let index = 0; index < buttonWrapItem.length; index++) {
            buttonWrapItem[index].className = buttonWrapItem[index].className + " rubus-button-wrap";
          }
        }
      }
    }
  }

  afterUpdate(() => {
    addChildClassName();
  });

  $: styleCssText = [
    variants === "justified" &&
      orientation === "horizontal" &&
      `width:var(--spectrum-global-dimension-${dimension}, var(--spectrum-alias-${dimension}))`,
    variants === "justified" &&
      orientation === "vertical" &&
      `height:var(--spectrum-global-dimension-${dimension}, var(--spectrum-alias-${dimension}))`,
  ]
    .filter(Boolean)
    .join(" ");
</script>

<div
  class="spectrum-ActionGroup"
  style={styleCssText}
  class:spectrum-ActionGroup--justified={variants === 'justified'}
  class:spectrum-ActionGroup--vertical={orientation === 'vertical'}
  class:spectrum-ActionGroup--quiet={isQuiet}
  class:spectrum-ActionGroup--compact={isCompact}
  bind:this={actionGroup}>
  <slot />
</div>
