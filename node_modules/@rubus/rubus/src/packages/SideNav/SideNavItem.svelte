<script>
  import { afterUpdate } from "svelte";
  import { current_component } from "svelte/internal";
  import { getEventsAction } from "../utils/get-events-action.js";

  /**
   * Specify the label text of SideNav item
   * @type { string }[ title = "" ]
   */
  export let label = "";

  /**
   * Whether the SideNav item is selected
   * @type { boolean }[ isSelected = false ]
   */
  export let isSelected = false;

  /**
   * Set to `true` to disable the  SideNav item
   * @type {boolean} [disabled=false]
   */
  export let disabled = false;

  /**
   * Set the `href` to use an anchor link
   * @type {string}[href = ""]
   */
  export let href = "#";

  let sideNavItemEl;
  const eventsListen = getEventsAction(current_component);
  afterUpdate(() => {
    if (sideNavItemEl && sideNavItemEl.getElementsByTagName("svg").length) {
      let sideNavItemIcon = sideNavItemEl && sideNavItemEl.getElementsByTagName("svg")[0];
      sideNavItemIcon.classList.toggle("spectrum-SideNav-itemIcon");
    }
  });
</script>

<li
  class="spectrum-SideNav-item"
  class:is-selected={isSelected}
  class:is-disabled={disabled}
  bind:this={sideNavItemEl}
  use:eventsListen>
  <a {href} class="spectrum-SideNav-itemLink" aria-current={isSelected && 'page'}><slot>{label}</slot></a>
  <slot name="sidenav-child" />
</li>
