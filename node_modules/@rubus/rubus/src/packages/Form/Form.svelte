<script>
  import { onMount } from "svelte";
  import { current_component } from "svelte/internal";
  import { getEventsAction } from "../utils/get-events-action.js";

  /**
   * Specify the align side mode of form
   * @type {"above" | "left" | "right"}[alignSide="above"]
   */
  export let alignSide = "above";

  let formEl;
  const eventsListen = getEventsAction(current_component);
  onMount(() => {
    formEl && addClassName();
  });

  function addClassName() {
    let fieldLabelList = formEl.getElementsByClassName("spectrum-FieldLabel");
    if (fieldLabelList.length) {
      for (let index = 0; index < fieldLabelList.length; index++) {
        fieldLabelList[index].classList.toggle(`spectrum-Form-itemLabel`);
        alignSide !== "above" && fieldLabelList[index].classList.toggle(`spectrum-FieldLabel--${alignSide}`);
      }
    }
  }
</script>

<form
  class="spectrum-Form {alignSide === 'above' && 'spectrum-Form--labelsAbove'}"
  bind:this={formEl}
  {...$$restProps}
  use:eventsListen>
  <slot />
</form>
