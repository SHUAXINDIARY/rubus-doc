<script>
  import { setContext } from "svelte";
  import { writable } from "svelte/store";

  /**
   * Specify the quiet for the table
   * @type {boolean} [isQuiet = false]
   */
  export let isQuiet = false;

  /**
   * Whether to use "div" as element
   * @type {boolean} [useDivElement = false]
   */
  export let useDivElement = false;

  /**
   * Whether to support multiple selection
   * @type {boolean} [multiSelect = false]
   */
  export let multiSelect = false;

  /**
   * The element css height
   * @type {DimensionValue} [height = "100%"]
   */
  export let height = "100%";

  /**
   * The element css width
   * @type {DimensionValue} [width = "auto"]
   */
  export let width = "auto";

  const rubusTableStaticConfig = writable({
    multiSelect: multiSelect,
    useDivElement: useDivElement,
  });
  setContext("rubusTableStaticConfig", rubusTableStaticConfig);
  $: styleCssText = [
    height && height.toString().indexOf("size") !== -1
      ? `height:var(--spectrum-global-dimension-${height});`
      : height.toString().indexOf("%") !== -1
      ? `height: ${height};`
      : `height: ${height}px;`,
    width && width.toString().indexOf("size") !== -1
      ? `width:var(--spectrum-global-dimension-${width});`
      : width.toString().indexOf("%") !== -1
      ? `width: ${width};`
      : `width: ${width}px;`,
  ]
    .filter(Boolean)
    .join(" ");
</script>

{#if useDivElement}
  <div class="spectrum-Table" class:spectrum-Table--quiet={isQuiet} role="grid" style={styleCssText}>
    <slot />
  </div>
{:else}
  <table class="spectrum-Table" class:spectrum-Table--quiet={isQuiet}>
    <slot />
  </table>
{/if}
