<script>
  import { getContext, onMount } from "svelte";
  import Checkbox from "../Checkbox";

  /**
   * The element tabindex attribute
   * @type {boolean|number} [tabindex = false]
   */
  export let tabindex = false;

  /**
   * Whether to provide check option
   * @type {boolean} [isCheckbox = false]
   */
  export let isCheckbox = false;

  /**
   * Whether the row is checked
   * @type {boolean} [checked = false]
   */
  export let checked = false;

  /**
   * Whether it contains dividing line
   * @type {boolean} [hasDivider = false]
   */
  export let hasDivider = false;

  let rubusTableStaticConfig = getContext("rubusTableStaticConfig");

  onMount(() => {
    if (!tabindex && !$rubusTableStaticConfig.multiSelect) {
      tabindex = 0;
    }
  });
</script>

{#if $rubusTableStaticConfig.useDivElement}
  <div
    class="spectrum-Table-cell"
    class:spectrum-Table-cell--divider={hasDivider}
    style="flex: 1"
    role="gridcell"
    on:click
    on:keydown
    {tabindex}>
    {#if isCheckbox}
      <Checkbox class="spectrum-Table-checkbox" bind:checked isQuiet />
    {:else}
      <slot />
    {/if}
  </div>
{:else}
  <td class="spectrum-Table-cell" class:spectrum-Table-cell--divider={hasDivider} on:click on:keydown {tabindex}>
    {#if isCheckbox}
      <Checkbox class="spectrum-Table-checkbox" bind:checked isQuiet />
    {:else}
      <slot />
    {/if}
  </td>
{/if}
