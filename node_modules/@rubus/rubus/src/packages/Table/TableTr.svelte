<script>
  import { getContext, onMount } from "svelte";

  /**
   * The element tabindex attribute
   * @type {boolean|number} [tabindex = false]
   */
  export let tabindex = false;

  /**
   * Whether the row is selected
   * @type {boolean} [isSelected = false]
   */
  export let isSelected = false;

  /**
   * Whether the row can be used as the target of the drop event
   * @type {boolean} [isDropTarget = false]
   */
  export let isDropTarget = false;

  let tableThEl;
  let inBody = false;
  let rubusTableStaticConfig = getContext("rubusTableStaticConfig");
  onMount(() => {
    if (!tabindex && $rubusTableStaticConfig.multiSelect) {
      tabindex = 0;
    }
    inBody = tableThEl.parentNode.classList.contains("spectrum-Table-body");
  });
</script>

{#if $rubusTableStaticConfig.useDivElement}
  <div
    class:spectrum-Table-row={inBody}
    class:is-selected={isSelected}
    class:is-drop-target={isDropTarget}
    {tabindex}
    style="display: flex"
    role="row"
    bind:this={tableThEl}>
    <slot />
  </div>
{:else}
  <tr class:spectrum-Table-row={inBody} class:is-selected={isSelected} {tabindex} bind:this={tableThEl}>
    <slot />
  </tr>
{/if}
