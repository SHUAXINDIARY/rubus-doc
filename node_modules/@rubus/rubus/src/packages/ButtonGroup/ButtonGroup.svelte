<script>
  import("@spectrum-css/buttongroup/dist/index-vars.css");

  import { onMount } from "svelte";
  /**
   * Specify the orientation
   * @type {"horizontal" | "vertical"}[orientation="horizontal"]
   */
  export let orientation = "horizontal";

  /**
   * Unified settings the variant of button group
   * @type {"cta" | "overBackground" | "primary" | "secondary" | "warning"} [variant=""]
   */
  export let variant = "";

  /**
   * Disable all buttons
   * @type {boolean}[disabled=false]
   */
  export let disabled = false;

  let buttonGroup;
  function addChildClassName() {
    let buttonClassName = [" spectrum-ButtonGroup-item", variant && `spectrum-Button--${variant}`]
      .filter(Boolean)
      .join(" ");
    if (buttonGroup) {
      const selectedItem = buttonGroup.getElementsByClassName("spectrum-Button");
      if (selectedItem.length !== 0) {
        for (let index = 0; index < selectedItem.length; index++) {
          if (disabled) {
            selectedItem[index].setAttribute("disabled", disabled);
          }
          selectedItem[index].className = selectedItem[index].className + buttonClassName;
        }
      }
    }
  }

  onMount(() => {
    addChildClassName();
  });
</script>

<div
  class="spectrum-ButtonGroup"
  class:spectrum-ButtonGroup--vertical={orientation == 'vertical'}
  bind:this={buttonGroup}>
  <slot />
</div>
