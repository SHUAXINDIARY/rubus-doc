<script>
  import { IconChevronRightMedium } from "@rubus/svelte-spectrum-icons-ui";
  import {
    IconFolder,
    IconFileCSV,
    IconFileHTML,
    IconFileXML,
    IconFileZip,
    IconFileTxt,
    IconFileJson,
    IconFileCode,
  } from "@rubus/svelte-spectrum-icons-workflow";
  import Checkbox from "../Checkbox";

  /**
   * Preconditions:variants => "image"
   * Set the src attribute of the img element
   * @type {string} [imgUrl = ""]
   */
  export let imgUrl = "";

  /**
   * Preconditions:variants => "image"
   * Set the alt attribute of the img element
   * @type {string} [imgAlt = "Asset list item image"]
   */
  export let imgAlt = "Asset list item image";

  /**
   * Specify the exterior of asset
   * @type {"branches" | "files" } [exterior="branches"]
   */
  export let exterior = "branches";

  /**
   * Specify the variant of asset
   * @type {"image"|"floder"|"csv"|"html"|"xml"|"zip"|"txt"|"json"|"code"} [variants = "folder"]
   */
  export let variants = "folder";

  /**
   * Is it selected
   * @type {boolean } [isSelected = false]
   */
  export let isSelected = false;

  /**
   * Specify the tabindex
   * @type {string}[tabindex="0"]
   */
  export let tabindex = "0";

  /**
   * Set to `true` to disable the asset list item
   * @type {boolean}[disabled=false]
   */
  export let disabled = false;

  /**
   * Specify the text label
   * @type {string}[label = ""]
   */
  export let label = "";

  /**
   * Whether there is a branch
   * @type {boolean}[isBranch = false]
   */
  export let isBranch = false;

  /**
   * Is it selectable
   * @type {boolean}[isSelectable = true]
   */
  export let isSelectable = true;
</script>

<style global>
  [dir="ltr"] .spectrum-AssetList-itemSelector {
    margin-right: 0 !important;
  }
  [dir="rtl"] .spectrum-AssetList-itemSelector {
    margin-left: 0 !important;
  }
  .spectrum-AssetList-item-disabled {
    pointer-events: none;
  }
  .spectrum-AssetList-itemThumbnail-disabled,
  .spectrum-AssetList-itemLabel-disabled {
    color: var(--spectrum-alias-icon-color-disabled);
  }
  .spectrum-AssetList-item > .spectrum-AssetList-itemSelector-files {
    visibility: hidden;
  }
  .spectrum-AssetList-item:hover > .spectrum-AssetList-itemSelector-files {
    visibility: visible;
  }
  .is-selected > .spectrum-AssetList-itemSelector-files {
    visibility: visible;
  }
</style>

<li
  class="spectrum-AssetList-item"
  class:is-selectable={isSelectable}
  class:is-selected={isSelected}
  class:is-branch={isBranch}
  class:spectrum-AssetList-item-disabled={disabled}
  {tabindex}>
  {#if exterior === 'branches'}
    <Checkbox isQuiet class="spectrum-AssetList-itemSelector" bind:checked={isSelected} {disabled} />
  {/if}
  {#if variants == 'image'}
    <img class="spectrum-AssetList-itemThumbnail" alt={imgAlt} src={imgUrl} />
  {:else if variants == 'folder'}
    <IconFolder
      className="spectrum-AssetList-itemThumbnail {disabled && `spectrum-AssetList-itemThumbnail-disabled`}" />
  {:else if variants == 'csv'}
    <IconFileCSV
      className="spectrum-AssetList-itemThumbnail {disabled && `spectrum-AssetList-itemThumbnail-disabled`}" />
  {:else if variants == 'html'}
    <IconFileHTML
      className="spectrum-AssetList-itemThumbnail {disabled && `spectrum-AssetList-itemThumbnail-disabled`}" />
  {:else if variants == 'xml'}
    <IconFileXML
      className="spectrum-AssetList-itemThumbnail {disabled && `spectrum-AssetList-itemThumbnail-disabled`}" />
  {:else if variants == 'zip'}
    <IconFileZip
      className="spectrum-AssetList-itemThumbnail {disabled && `spectrum-AssetList-itemThumbnail-disabled`}" />
  {:else if variants == 'txt'}
    <IconFileTxt
      className="spectrum-AssetList-itemThumbnail {disabled && `spectrum-AssetList-itemThumbnail-disabled`}" />
  {:else if variants == 'json'}
    <IconFileJson
      className="spectrum-AssetList-itemThumbnail {disabled && `spectrum-AssetList-itemThumbnail-disabled`}" />
  {:else if variants == 'code'}
    <IconFileCode
      className="spectrum-AssetList-itemThumbnail {disabled && `spectrum-AssetList-itemThumbnail-disabled`}" />
  {/if}
  <span class="spectrum-AssetList-itemLabel {disabled && `spectrum-AssetList-itemLabel-disabled`}">
    <slot>{label}</slot>
  </span>
  {#if exterior === 'files' && !isBranch}
    <Checkbox
      class="spectrum-AssetList-itemSelector spectrum-AssetList-itemSelector-files"
      bind:checked={isSelected}
      isQuiet
      {disabled} />
  {/if}
  <IconChevronRightMedium
    className="spectrum-UIIcon-ChevronRightMedium spectrum-AssetList-itemChildIndicator"
    focusable="false"
    aria-hidden="true" />
</li>
