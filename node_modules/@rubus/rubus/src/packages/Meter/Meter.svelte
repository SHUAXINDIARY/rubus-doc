<script>
  /**
   * Specify the value of barloader
   * @type { number } [value=50]
   */
  export let value = 50;

  /**
   * Specify the min value of barloader
   * @type { number } [minValue=0]
   */
  export let minValue = 0;

  /**
   * Specify the max value of barloader
   * @type { number } [maxValue=0]
   */
  export let maxValue = 100;

  /**
   * Specify the label of barloader
   * @type { string } [label = "Storage Space"]
   */
  export let label = "Storage Space";

  /**
   * Specify the variant of barloader
   * @type { "" | "positive"  | "warning" | "critical"  } [variant=""]
   */
  export let variants = "";

  $: finalValue = regulateValue(value);

  function regulateValue(v) {
    if (+v < 0) {
      return 0;
    }
    if (+v > 100) {
      return 100;
    }
    return isNaN(parseInt(v)) ? 0 : parseInt(v);
  }
</script>

<div
  class="spectrum-ProgressBar is-{variants}"
  {finalValue}
  role="progressbar"
  aria-valuenow={finalValue}
  aria-valuemin={minValue}
  aria-valuemax={maxValue}>
  <div class="spectrum-ProgressBar-label">
    <slot>{label}</slot>
  </div>
  <div class="spectrum-ProgressBar-percentage">{finalValue}%</div>
  <div class="spectrum-ProgressBar-track">
    <div class="spectrum-ProgressBar-fill" style={`width: ${finalValue}%;`} />
  </div>
</div>
